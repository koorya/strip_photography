# Щелевая фотосъемка на эффекте rolling shutter

Принцип понятен.

Вебкамера + стробоскоп. Получил изображение вспышки шириной примерно в 1 пиксель.
Для косменсации слабой яркости камера может включать автоподстройку экспозиции, которая исполнена методом под названием [биннинг](https://www.baslerweb.com/ru/prodazhi-i-tekhpodderzhka/baza-znanij/vopros-otvet-faq/what-is-binning/15191/). Это суммирование значений с пикселей и выдача будто это один пиксель.

Нашел несколько разных объективов.
Мне дали цилиндрическую линзу.
OpenCV, насколько я понял, может конфигурировать вебкамеру. Может захватывать видеопоток.
Пробовал отключить автоподстройку экспозиции камеры через скайп.

Купил дополнительно камеру от видеорегистратора за 300 рублей. В названии написано VGA. Но пока не ясно какой интерфейс там на самом деле.
Пробую разобраться с этой камерой. У меня есть vga монитор.

Была идея в блендере хотябы просто нарисовать ход лучей, чтобы понимать самому и иметь иллюстрацию для презентации.
В блендере, наверное, даже можно трасировку лучей через линзы запустить.

Стробоскоп был собран на stm32, программировал в stm32 cube ide. в режиме дебага регистрами таймера на котором астроен шим.

11.10.2021
Разобрал камеру заднего вида. Хоть разъем на ней быль HDMI, а в названии фигурировало VGA, на плате оказалась распиновка USB, а контроллер гуглится как USB-камера  
[документация для контроллера](https://www.supertekmodule.com/wp-content/uploads/2019/09/ST-M8189WIFI-Camera-Module-Data-SheetV2.pdf)  
[документация для матрицы](https://www.min.at/prinz/fp-content/attachs/GC0308.pdf)  
Хочется сказать, что судя по документации, этой матрицей достаточно просто управлять, получая на выходе VGA сигнал в формате RGB565 + PCLOCK. Т.к. выходных сигналов с данными 8 штук, а не 16, то требуется еще один внешний регистр для получения 16-битного значения пикселя, который можно напрямую резисторами преобразовать в аналоговый сигнал и подключить к VGA монитору.   
Посмотрел внимательно на плату. Оказалось, что к контроллеру подключены всего 4 линии данных. При это на осциллографе эти данные выглядят как регулярные импульсы, на свет не реагирующие. Шина последовательных данных функционирует. Видны серии импульсов. 
Ни hsync ни vsync ни pclock на контроллер не распаяны.
Не уверен, что сенсор именно тот, что в схеме. Для его работы требуется записывать параметры в регистры.
[список сенсоров камеры](https://www.arducam.com/arducam-usb-camera-dev-kits/)  
Такие модули на шлейфе стоят 200 рубле на алиекспресс. Родилась идея синхронизировать сразу два модуля, установив их рядом и спроецировав одно и то же изображение. Потом потребуется каким-либо контроллером читать информацию с обоих модулей и конвертировать в общий видеопоток передаваемый по usb или ethernet.
Подключил ее к компьютеру. При получении изображения с нее приложением камера виндовс и другими камера выдает изображение буквально на мгновение, а затем выдает черный экран. При переподключении камеры в разъем ситуация повторяется. Пробовал так же подавать 12 вольт на линию 12 вольт. На плате через резистор эта линия заведена на GPIO контроллера. 
Пробовал снять микросхему памяти. Без нее драйвера установились заново, но изображения не получил совсем.
